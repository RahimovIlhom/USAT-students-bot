{% load static %}

<nav class="header-nav ms-auto">
  <ul class="d-flex align-items-center">

    <li class="nav-item d-block d-lg-none">
      <a class="nav-link nav-icon search-bar-toggle " href="#">
        <i class="bi bi-search"></i>
      </a>
    </li><!-- End Search Icon-->


    {% load i18n %}
    <li class="nav-item dropdown pe-3">
      <form action="{% url 'set_language' %}" method="post">{% csrf_token %}
          <input name="next" type="hidden" value="{{ redirect_to }}">
          <select name="language">
              {% get_current_language as LANGUAGE_CODE %}
              {% get_available_languages as LANGUAGES %}
              {% get_language_info_list for LANGUAGES as languages %}
              {% for language in languages %}
                  <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                      {{ language.name_local }} ({{ language.code }})
                  </option>
              {% endfor %}
          </select>
          <input type="submit" value="Go">
      </form>
    </li>

    <li class="nav-item dropdown pe-3">
      {% if user.is_authenticated %}
      <!-- Authenticated user uchun Profile -->
      <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
        <img src="{% static 'assets/img/profile-img.jpg' %}" alt="Profile" class="rounded-circle" style="width: 35px; height: 35px;">
        <span class="d-none d-md-block dropdown-toggle ps-2">{{ user.username }}</span>
      </a>

      <!-- Dropdown Menu -->
      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile shadow-sm">
        <li class="dropdown-header text-center">
          <h6 class="mb-1">{{ user.get_full_name|default:user.username }}</h6>
          <span class="text-muted">Web Designer</span>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <!-- My Profile -->
        <li>
          <a class="dropdown-item d-flex align-items-center" href="">
            <i class="bi bi-person me-2"></i>
            <span>{% translate "My Profile" %}</span>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <!-- Logout -->
        <li>
          <a class="dropdown-item d-flex align-items-center text-danger" href="">
            <i class="bi bi-box-arrow-right me-2"></i>
            <span>{% translate "Sign Out" %}</span>
          </a>
        </li>
      </ul>
      {% else %}
      <!-- Guest user uchun Login -->
      <a class="nav-link collapsed d-flex align-items-center text-decoration-none" href="">
        <i class="bi bi-box-arrow-in-right me-2"></i>
        <span>{% translate "Login" %}</span>
      </a>
      {% endif %}
    </li>

  </ul>
</nav><!-- End Icons Navigation -->